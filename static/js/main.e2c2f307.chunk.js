(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{16:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var a,s=c(7),n=c.n(s),r=c(1),o=c.n(r);c(12),c(13);!function(e){e.ALL="all",e.ACTIVE="active",e.COMPLETED="completed"}(a||(a={}));var l=c(5),i=c(2),d=c(3),j=c.n(d);function u(e){var t,c="https://mate-academy.github.io/react_dynamic-list-of-todos/api"+e+".json";return(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch(c)})).then((function(e){return e.json()}))}var b=function(){return u("/todos")},h=function(e){return u("/users/".concat(e))};var O=c(0),x=o.a.createContext({todos:[],sortType:a.ALL,query:"",appliedQuery:"",isLoaded:!0,isError:!1,getTodosFromServer:function(){},changeSortType:function(){},applyQuery:function(){},handleSearch:function(){},clearSearchBar:function(){}}),m=function(e){var t=e.children,c=Object(r.useState)([]),s=Object(i.a)(c,2),n=s[0],o=s[1],d=Object(r.useState)(a.ALL),u=Object(i.a)(d,2),h=u[0],m=u[1],f=Object(r.useState)(""),p=Object(i.a)(f,2),v=p[0],y=p[1],N=Object(r.useState)(""),g=Object(i.a)(N,2),C=g[0],T=g[1],S=Object(r.useState)(!0),L=Object(i.a)(S,2),w=L[0],k=L[1],E=Object(r.useState)(!1),I=Object(i.a)(E,2),A=I[0],F=I[1];function P(){return(P=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:t=e.sent,F(!1),k(!1),o(t),e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(0),F(!0),k(!1),new Error("Can't load list of todos");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var B=Object(r.useCallback)(function(e,t){var c;return function(){clearTimeout(c);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];c=setTimeout.apply(void 0,[e,t].concat(s))}}(T,1e3),[]),Q={todos:n,sortType:h,query:v,appliedQuery:C,isLoaded:w,isError:A,getTodosFromServer:function(){return P.apply(this,arguments)},changeSortType:function(e){var t=e.target.value;m(t)},applyQuery:B,handleSearch:function(e){y(e.target.value),B(e.target.value)},clearSearchBar:function(){y(""),T("")}};return Object(O.jsx)(x.Provider,{value:Q,children:t})},f=c(4),p=c.n(f),v=o.a.createContext({selectedUser:0,selectedTodoId:0,userInfo:null,getUserFromServer:function(){},handleClose:function(){},selectCurrentTodo:function(){}}),y=function(e){var t=e.children,c=Object(r.useState)(0),a=Object(i.a)(c,2),s=a[0],n=a[1],o=Object(r.useState)(0),d=Object(i.a)(o,2),u=d[0],b=d[1],x=Object(r.useState)(null),m=Object(i.a)(x,2),f=m[0],p=m[1];function y(){return(y=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(s);case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={selectedUser:s,selectedTodoId:u,userInfo:f,getUserFromServer:function(){return y.apply(this,arguments)},handleClose:function(){p(null),n(0),b(0)},selectCurrentTodo:function(e,t){n(t),b(e)}};return Object(O.jsx)(v.Provider,{value:N,children:t})},N=function(e){var t=e.todo,c=t.id,a=t.title,s=t.completed,n=t.userId,o=Object(r.useContext)(v),l=o.selectedTodoId,i=o.selectCurrentTodo,d=l===c;return Object(O.jsxs)("tr",{"data-cy":"todo",className:p()({"has-background-info-light":d}),children:[Object(O.jsx)("td",{className:"is-vcentered",children:c}),Object(O.jsx)("td",{className:"is-vcentered",children:s&&Object(O.jsx)("span",{className:"icon","data-cy":"iconCompleted",children:Object(O.jsx)("i",{className:"fas fa-check"})})}),Object(O.jsx)("td",{className:"is-vcentered is-expanded",children:Object(O.jsx)("p",{className:p()({"has-text-danger":!s,"has-text-success":s}),children:a})}),Object(O.jsx)("td",{className:"has-text-right is-vcentered",children:Object(O.jsx)("button",{"data-cy":"selectButton",className:"button",type:"button",onClick:function(){return i(c,n)},children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:p()("far",{"fa-eye":!d,"fa-eye-slash":d})})})})})]},c)},g=function(){var e,t=Object(r.useContext)(x),c=t.todos,s=t.sortType,n=t.appliedQuery,l=function(e){return c.filter((function(t){return t.completed===e}))},i=function(e){switch(s){case a.ALL:return e;case a.ACTIVE:return l(!1);case a.COMPLETED:return l(!0);default:return e}}(c),d=(e=n,i.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())})));return Object(O.jsxs)("table",{className:"table is-narrow is-fullwidth",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"#"}),Object(O.jsx)("th",{children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:"fas fa-check"})})}),Object(O.jsx)("th",{children:"Title"}),Object(O.jsx)("th",{children:" "})]})}),Object(O.jsx)("tbody",{children:d.map((function(e){return Object(O.jsx)(o.a.Fragment,{children:Object(O.jsx)(N,{todo:e})},e.id)}))})]})},C=function(){var e=Object(r.useContext)(x),t=e.query,c=e.handleSearch,s=e.clearSearchBar,n=Object(r.useContext)(x).changeSortType;return Object(O.jsxs)("form",{className:"field has-addons",children:[Object(O.jsx)("p",{className:"control",children:Object(O.jsx)("span",{className:"select",children:Object(O.jsxs)("select",{"data-cy":"statusSelect",onChange:n,children:[Object(O.jsx)("option",{value:a.ALL,children:"All"}),Object(O.jsx)("option",{value:a.ACTIVE,children:"Active"}),Object(O.jsx)("option",{value:a.COMPLETED,children:"Completed"})]})})}),Object(O.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(O.jsx)("input",{"data-cy":"searchInput",type:"text",className:"input",placeholder:"Search...",value:t,onChange:c}),Object(O.jsx)("span",{className:"icon is-left",children:Object(O.jsx)("i",{className:"fas fa-magnifying-glass"})}),t&&Object(O.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},children:Object(O.jsx)("button",{"aria-label":"delete","data-cy":"clearSearchButton",type:"button",className:"delete",onClick:s})})]})]})},T=(c(16),function(){return Object(O.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(O.jsx)("div",{className:"Loader__content"})})}),S=function(){var e=Object(r.useContext)(v),t=e.selectedTodoId,c=e.userInfo,a=e.getUserFromServer,s=e.handleClose,n=Object(r.useContext)(x).todos;Object(r.useEffect)((function(){a()}),[]);var o=n.find((function(e){return e.id===t}))||null;return Object(O.jsxs)("div",{className:"modal is-active","data-cy":"modal",children:[Object(O.jsx)("div",{className:"modal-background"}),c?Object(O.jsxs)("div",{className:"modal-card",children:[Object(O.jsxs)("header",{className:"modal-card-head",children:[Object(O.jsx)("div",{className:"modal-card-title has-text-weight-medium","data-cy":"modal-header",children:"Todo #".concat(t)}),Object(O.jsx)("button",{"aria-label":"close",type:"button",className:"delete","data-cy":"modal-close",onClick:s})]}),Object(O.jsxs)("div",{className:"modal-card-body",children:[Object(O.jsx)("p",{className:"block","data-cy":"modal-title",children:null===o||void 0===o?void 0:o.title}),Object(O.jsxs)("p",{className:"block","data-cy":"modal-user",children:[Object(O.jsx)("strong",{className:p()({"has-text-danger":!(null!==o&&void 0!==o&&o.completed),"has-text-success":null===o||void 0===o?void 0:o.completed}),children:null!==o&&void 0!==o&&o.completed?"Done":"Planned"})," by ",Object(O.jsx)("a",{href:"mailto:".concat(c.email),children:c.name})]})]})]}):Object(O.jsx)(T,{})]})},L=function(){var e=Object(r.useContext)(v).selectedTodoId,t=Object(r.useContext)(x),c=t.isLoaded,a=t.isError,s=t.getTodosFromServer;Object(r.useEffect)((function(){s()}),[]);var n=a?Object(O.jsx)("p",{children:"something went wrong"}):Object(O.jsx)(g,{});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"section",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"box",children:[Object(O.jsx)("h1",{className:"title",children:"Todos:"}),Object(O.jsx)("div",{className:"block",children:Object(O.jsx)(C,{})}),Object(O.jsx)("div",{className:"block",children:c?Object(O.jsx)(T,{}):n})]})})}),e&&Object(O.jsx)(S,{})]})};n.a.render(Object(O.jsx)(m,{children:Object(O.jsx)(y,{children:Object(O.jsx)(L,{})})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e2c2f307.chunk.js.map